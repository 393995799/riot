!function(){function n(n,e,r,i,u){var a=[],p=[],l=[],v=[];s(r,function(t){var e=o(t,"if");var r=b(e);if(r){a.push(new m(t,n,r,i,u));return false}e=o(t,"each"),query=b(e);if(query){p.push([query,t]);return false}var s=f(t);if(t!=n.root&&c(s)){l.push(new N(s,t,w(t)));return false}var y=b(t.nodeValue);y&&v.push(function(){var e=y.apply(n,u),r=h(e);if(d(e)){var i=t.parent||t.parentNode;i.innerHTML=r;t.parent=i}else t.nodeValue=r});C(t)});p=p.map(function(t){return new y(t[0],t[1],n,e,i,u)});this.update=function(){t(a.concat(l).concat(p),function(n){n.update()});t(v,function(t){t.apply(n,u)})};function b(n){if(n){n=n.trim();var t=1*n.slice(1);if(n[0]=="$"&&t>=0)return e[t]}}function g(t,e,r){t.removeAttribute(e);t.addEventListener(e.slice(2),function(t){var e=[t].concat(u),i=r.apply(n,e);if(i){var a=i.apply(n,e);n.update();return a}})}function w(e){var r={},i=[];t(e.attributes,function(t){var e=b(t.value);r[t.name]=e?e.apply(n,u):t.value;e&&i.push(t.name)});t(i,function(n){e.removeAttribute(n)});return r}function C(e){t(e.attributes,function(t){var r=b(t.value);if(!r)return;t.value="";var i=t.name;if(i.slice(0,2)=="on"){g(e,i,r)}else{v.push(function(){var t=r.apply(n,u),a=e.changed||e;t===false?a.removeAttribute(i):a.setAttribute(i,h(t))})}})}}function t(n,t){if(n){for(var e=0;e<n.length;e++){t(n[e],e)}}}function e(){return document.createTextNode("")}function r(n,t){n.parentNode.insertBefore(t,n);return t}function i(n){var t=n.parentNode;t&&t.removeChild(n)}function u(n,t){while(n.childNodes[0])t.appendChild(n.firstChild)}function a(n,e){t(n.attributes,function(n){e.setAttribute(n.name,n.value)})}function o(n,t){var e=n.tagName&&n.getAttribute(t);if(e){n.removeAttribute(t);return e}}function f(n){var t=n.tagName;return t&&t.toLowerCase()}function c(n){return n&&!!w[n.toLowerCase()]}function p(n,e){t(Object.keys(e),function(t){n[t]=e[t]});return n}function l(n){var t=document.createElement("template");t.innerHTML=n.trim();return(t.content||t).firstChild}function s(n,t){if(t(n)===false)return;n=n.firstChild;while(n){if(s(n,t)===false)return;n=n.nextSibling}}function v(n){var t=[];for(var e in n){var r=n[e];if(r)t.push(e=="_html"?r:e)}return t.join(" ")}function d(n){for(var t=0,e;e=(n||[])[t];t++){if(e._html)return true}}function h(n){return Array.isArray(n)?n.map(h).join(""):n==null?"":typeof n=="object"?v(n):n}function m(n,t,u,a,o){var f=r(n,e()),c;this.update=function(){return u.apply(t,o)?p():i(n)};function p(){!c&&a(n,o);c=r(f,n)}}function y(n,u,a,o,f,c){var p=n.apply(a,c);var l=u.previousSibling;if(!l){l=e();u.parentNode.appendChild(l)}var s=r(l,e()),v=[];function d(n){p.splice(0,p.length);t(n,m);p=b(n)}this.update=function(){var t=n.apply(a,c);if(t!=p)d(t)};function h(n,t){var e=u.cloneNode(true);r(t,e);return e}function m(n,t){var e=h(n,l);v.push(e);f(e,c.concat([n]))}function y(n){var t=h(n,s.nextSibling);v.unshift(t);f(t,c.concat([n]))}function b(n){var e=n.push;n.push=function(t){e.call(n,t);m(t);a.update()};var r=n.unshift;n.unshift=function(t){r.call(n,t);y(t);a.update()};var u=n.splice;n.splice=function(e,r){t(v.slice(e,e+r),i);v.splice(e,r);u.call(n,e,r)};n.remove=function(t){var e=n.indexOf(t);if(e>=0)return n.splice(e,1)};var o=n.sort;n.sort=function(e){t(v,i);v=[];o.call(n,e);t(n,m);a.update()};return n}i(u);if(p){b(p);t(p,m)}}var b=window.riot={},g=[],w={};b.tag=function(n,t,e,r){w[n]=[t,e,r]};b.mount=function(n,t,e){var r=new N(n,t,e);g.push(r);return r.update()};b.update=function(){t(g,function(n){n.update()})};function N(e,r,i){var a=w[e];if(!a)throw"No such tag "+e;var o=this.root=l(a[0]),c=this,s=[];function v(t,e){var r=new n(c,a[1],t,v,e);s.push(r)}this.opts=i;var d=a[2];d&&d.call(c,c,i);v(o,[]);if(r){if(f(r)==e){u(o,r);o.changed=r;o=r}else{r.parentNode.replaceChild(o,r)}}function h(n){if(n)p(c,n);t(s,function(n){n.update()});return c}Object.defineProperty(c,"update",{get:function(){return h},set:function(n){throw"Cannot set update property"}})}}();