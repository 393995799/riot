!function(){function n(n,e,a,o){var f=[],c=[],p=[];this.update=function(){t(p,function(t){t.call(n,o)});t(f,function(n){n.update()})};walk(a,function(t){a=r(t,"if");var e=h(a);if(e){f.push(new s(t,n,e,o));return false}var a=r(t,"each"),v=h(a);if(v){c.push([v,t]);return false}var m=i(t);if(t!=n.root&&u(m))return d.mount(m,t,o);var N=h(t.nodeValue);N&&p.push(function(){var e=N.call(n,o);if(e&&e._html)t.parentNode.innerHTML=e._html;else t.nodeValue=l(e)});w(t)});c=c.map(function(t){return new v(t[0],t[1],n,e,o)});function h(n){if(n){n=n.trim();var t=1*n.slice(1);if(n[0]=="$"&&t>=0)return e[t]}}function m(t,e,r){t.removeAttribute(e);t.addEventListener(e.slice(2),function(t){var e=r.call(n,t,o);if(e){var i=e.call(n,t,o);n.update();return i}})}function w(e){t(e.attributes,function(t){var r=h(t.value);if(!r)return;var i=t.name;if(i.slice(0,2)=="on"){m(e,i,r)}else{p.push(function(){var e=r.call(n,o);t.value=l(e)})}})}}function t(n,t){if(n){for(var e=0;e<n.length;e++){t(n[e],e)}}}function e(n,t){n.parentNode.insertBefore(t,n);return t}function r(n,t){var e=n.tagName&&n.getAttribute(t);if(e){n.removeAttribute(t);return e}}function i(n){var t=n.tagName;return t&&t.toLowerCase()}function u(n){return n&&!!p[n.toLowerCase()]}function a(n,e){t(Object.keys(e),function(t){n[t]=e[t]});return n}function o(n){var t=document.createElement("div");t.innerHTML=n.trim();return t.firstChild}function f(n){var e={};t(n.attributes,function(n){e[n.name]=n.value});return e}self.walk=function(n,t){if(t(n)===false)return;n=n.firstChild;while(n){if(self.walk(n,t)===false)return;n=n.nextSibling}};function c(n){var t=[];for(var e in n){if(n[e])t.push(e)}return t.join(" ")}function l(n){return Array.isArray(n)?n.map(l).join(""):n==null?"":typeof n=="object"?c(n):n}function s(n,t,r,i){var u=e(n,document.createTextNode("")),a=n.parentNode,o;this.update=function(){return r.call(t,i)?c():f()};function f(){a&&a.removeChild(n)}function c(){!o&&t.addBlock(n,i);e(u,n)}}function v(n,r,i,u,a){var o=n.call(i,a);if(!o)return;var f=r.previousSibling,c=e(f,document.createTextNode("")),l=[];function s(n,t){var i=r.cloneNode(true);e(t,i);return i}function v(n){n.parentNode.removeChild(n)}function d(n,t){var e=s(n,f);l.push(e);i.addBlock(e,n)}function p(n){var t=s(n,c.nextSibling);l.unshift(t);i.addBlock(t,n)}var h=o.push;o.push=function(n){h.call(o,n);d(n)};var m=o.unshift;o.unshift=function(n){m.call(o,n);p(n)};var w=o.splice;o.splice=function(n,e){t(l.slice(n,n+e),v);l.splice(n,e);w.call(o,n,e)};o.remove=function(n){var t=o.indexOf(n);if(t>=0)return o.splice(t,1)};v(r);t(o,d)}var d=window.riot={};var p={};d.tag=function(n,t,e,r){p[n]=[t,e,r]};d.mount=function(n,t,e){var r=p[n];if(r){var i=new h(n,r[0],r[1],r[2],e);return i.mount(t)}};function h(e,r,i,u,c){this.opts=c=c||{};var l=this,s=[],v;this.addBlock=function(t,e){var r=new n(l,i,t,e);s.push(r)};this.mount=function(n){if(!v){v=l.root=o(r);u&&u.call(l,l,c);l.addBlock(v,c)}if(!n)return v.mount();a(c,f(n));var i=n.tagName.toLowerCase();if(i==e){t(v.childNodes,function(t){n.appendChild(t)});v=n}else{n.parentNode.replaceChild(v,n)}n.__tag=l;return l.update()};this.unmount=function(){var n=v.unmount();if(n)n.__tag=l};this.update=function(n){if(n)a(l,n);t(s,function(n){n.update()});return l}}}();