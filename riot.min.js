!function(){function n(n,r,i,u){var a=[],o=[],l=[],p=[];this.root=n;s(n,function(n){var t=e(n);var p=d(t.if);if(p){a.push(new m(n,i,u,function(){return p.apply(r,u)}));return false}var s=d(t.each);if(s){o.push([s,n]);return false}var v=t.name||t.id;if(v&&v[0]!="$")i.addRef(v,n);if(n!=r.root&&c(n)){var h=f(n),y=new g(h,n,C(n,t),r);i.addChild(h,y);l.push(y);return false}var w=d(n.nodeValue);w&&b(n,w);A(n,t)});o=o.map(function(n){return new y(n[0],n[1],r,i,u)});this.update=function(){t(a.concat(l).concat(o),function(n){n.update()});t(p,function(n){n.apply(r,u)})};function d(n){if(n){n=n.trim();var t=1*n.slice(1);if(n[0]=="$"&&t>=0)return i.fns[t]}}function b(n,t){p.push(function(){var e=t.apply(r,u),i=h(e);if(v(e)){var a=n.parent||n.parentNode;a.innerHTML=i;n.parent=a}else n.nodeValue=i})}function w(n,t,e){n.removeAttribute(t);n.addEventListener(t.slice(2),function(n){var t=[n].concat(u),i=e.apply(r,t);if(i){var a=i.apply(r,t);r.update();return a}})}function C(n,t){var e={},i=[];for(var a in t){var o=t[a];var f=d(o);e[a]=f?f.apply(r,u):o;f&&n.removeAttribute(a)}return e}function A(n,e){t(n.attributes,function(t){var e=d(t.value);if(!e)return;var i=t.name;t.value="";if(i.slice(0,2)=="on")return w(n,i,e);p.push(function(){var t=e.apply(r,u),a=n.changed||n;t===false?a.removeAttribute(i):a.setAttribute(i,h(t))})})}}function t(n,t){if(n){for(var e=0;e<n.length;e++){if(t(n[e],e)===false)e--}}}function e(n){var e={};t(n.attributes,function(n){e[n.name]=n.value});return e}function r(){return document.createTextNode("")}function i(n,t){n.parentNode.insertBefore(t,n);return t}function u(n){var t=n.parentNode;t&&t.removeChild(n)}function a(n,t){while(n.childNodes[0])t.appendChild(n.firstChild)}function o(n,e){t(n.attributes,function(n){e.setAttribute(n.name,n.value)})}function f(n){var t=n.tagName;return t&&t.toLowerCase()}function c(n){var t=f(n);return t&&!!C[t.toLowerCase()]}function l(n,e){t(Object.keys(e),function(t){n[t]=e[t]});return n}function p(n){var t=document.createElement("template");t.innerHTML=n.trim();return(t.content||t).firstChild}function s(n,t){if(t(n)===false)return;n=n.firstChild;while(n){if(s(n,t)===false)return;n=n.nextSibling}}function d(n){var t=[];for(var e in n){var r=n[e];if(r)t.push(e=="_html"?r:e)}return t.join(" ")}function v(n){for(var t=0,e;e=(n||[])[t];t++){if(e._html)return true}}function h(n){return Array.isArray(n)?n.map(h).join(""):n==null?"":typeof n=="object"?d(n):n}function m(n,t,e,a){n.removeAttribute("if");var o=i(n,r());this.update=function(){return a()?c():f()};function f(){t.removeBlock(n);u(n)}function c(){i(o,n);t.addBlock(n,e)}}function y(n,e,a,o,f){e.removeAttribute("each");var c=n.apply(a,f);var l=e.previousSibling;if(!l){l=r();e.parentNode.appendChild(l)}var p=i(l,r()),s=[];function d(n){c.splice(0,c.length);t(n,h);c=y(n)}this.update=function(){var t=n.apply(a,f);if(t!=c)d(t)};function v(n,t){var r=e.cloneNode(true);i(t,r);return r}function h(n,t){var e=v(n,l);s.push(e);o.addBlock(e,f.concat([n]))}function m(n){var t=v(n,p.nextSibling);s.unshift(t);o.addBlock(t,f.concat([n]))}function y(n){var e=n.push;n.push=function(t){e.call(n,t);h(t);a.update()};var r=n.unshift;n.unshift=function(t){r.call(n,t);m(t);a.update()};var i=n.splice;n.splice=function(e,r){t(s.slice(e,e+r),function(n){o.removeBlock(n);u(n)});s.splice(e,r);i.call(n,e,r)};n.remove=function(t){var e=n.indexOf(t);if(e>=0)return n.splice(e,1)};var f=n.sort;n.sort=function(e){t(s,u);s=[];f.call(n,e);t(n,h);a.update()};return n}u(e);if(c){y(c);t(c,h)}}var b=window.riot={},w=[],C={};b.tag=function(n,t,e,r){C[n]=[t,e,r]};b.mount=function(n,t,e){var r=new g(n,t,e);w.push(r);return r.update()};b.update=function(){t(w,function(n){n.update()})};function g(e,r,i,u){var o=C[e];if(!o)throw"No such tag "+e;l(this,{opts:i,parent:u});var c=this.root=p(o[0]),s=this.tags={},d=this.refs={},v=this,h=[];var m={fns:o[1],addBlock:function(t,e){var r=new n(t,v,m,e);h.push(r);return r},removeBlock:function(n){t(h,function(t,e){if(t.root==n)h.splice(e,1)})},addChild:function(n,t,e){e=e||s;var r=e[n];if(Array.isArray(r))r.push(t);else e[n]=r?[r,t]:t},addRef:function(n,t){m.addChild(n,t,d)}};m.addBlock(c,[]);var y=o[2];y&&y.call(v,v,i);if(r){if(f(r)==e){a(c,r);c.changed=r;c=r}else{r.parentNode.replaceChild(c,r)}}function b(n){if(n)l(v,n);t(h,function(n){n.update()});return v}Object.defineProperty(v,"update",{get:function(){return b},set:function(n){throw"Cannot set update property"}})}}();