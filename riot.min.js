!function(){function n(n,r,o){var s=r.__,p=[],v=[],C=[],g=[],A=[];this.root=n;d(n,function(n){var t=c(n),i=e(n);var u=k(i.if);if(u){A.push(new y(n,r,o,function(){return u.apply(r,o)}));return false}if(t=="yield"){p.push(n);return false}var a=k(i.each);if(a){v.push([a,n]);return false}var f=i.name||i.id;if(f&&f[0]!="$")s.addRef(f,n);if(n!=r.root&&l(n)){var d=new w(t,n,j(n,i),r);s.addChild(t,d);C.push(d);return false}var h=k(n.nodeValue);if(h){N(n,h)}x(n,i)});v=v.map(function(n){return new b(n[0],n[1],r,o)});function _(n){r.parent.__.addBlock(n)}t(p,function(n){var t=e(n).name,o=r.parent.root;if(t){var c=a(o,t);c.removeAttribute("name");i(n,c);_(c)}else{f(o.firstChild.nextSibling,n,_)}u(n)});this.update=function(){t(A.concat(C).concat(v),function(n){n.update()});t(g,function(n){n.apply(r,o)})};function k(n){if(n){n=n.trim();var t=1*n.slice(1);if(n[0]=="$"&&t>=0)return s.fns[t]}}function N(n,t){g.push(function(){var e=t.apply(r,o),i=m(e);if(h(e)){var u=n.parent||n.parentNode;u.innerHTML=i;n.parent=u}else n.nodeValue=i})}function B(n,t,e){n.removeAttribute(t);n.addEventListener(t.slice(2),function(n){var t=o.concat([n]),i=e.apply(r,t);if(i){var u=i.apply(r,t);r.update();return u}})}function j(n,t){var e={},i=[];for(var u in t){var a=t[u];var f=k(a);e[u]=f?f.apply(r,o):a;f&&n.removeAttribute(u)}return e}function x(n,t){Object.keys(t).forEach(function(e){var i=k(t[e]);if(!i)return;n.setAttribute(e,"");if(e.slice(0,2)=="on"){B(n,e,i)}else{g.push(function(){var t=i.apply(r,o),u=n.changed||n;t===false?u.removeAttribute(e):u.setAttribute(e,m(t))})}})}}function t(n,t){if(n){for(var e=0;e<n.length;e++){if(t(n[e],e)===false)e--}}}function e(n){var e={};t(n.attributes,function(n){e[n.name]=n.value});return e}function r(){return document.createTextNode("")}function i(n,t){n.parentNode.insertBefore(t,n);return t}function u(n){var t=n.parentNode;t&&t.removeChild(n)}function a(n,t){var e;d(n,function(n){if(n.tagName&&n.getAttribute("name")==t)e=n;if(e)return false});return e}function o(n,t){while(n.firstChild)t.appendChild(n.firstChild)}function f(n,t,e){while(n.firstChild){var r=n.firstChild;i(t,r);e(r)}}function c(n){var t=n.tagName;return t&&t.toLowerCase()}function l(n){var t=c(n);return t&&!!A[t.toLowerCase()]}function s(n,e){t(Object.keys(e),function(t){n[t]=e[t]});return n}function p(n){var t=document.createElement("template");t.innerHTML=n.trim();return(t.content||t).firstChild}function d(n,t){if(t(n)===false)return;n=n.firstChild;while(n){if(d(n,t)===false)return;n=n.nextSibling}}function v(n){var t=[];for(var e in n){var r=n[e];if(r)t.push(e=="_html"?r:e)}return t.join(" ")}function h(n){for(var t=0,e;e=(n||[])[t];t++){if(e._html)return true}}function m(n){return Array.isArray(n)?n.map(m).join(""):n==null?"":typeof n=="object"?v(n):n}function y(n,t,e,a){n.removeAttribute("if");var o=i(n,r()),f=t.__;this.update=function(){return a()?l():c()};function c(){f.removeBlock(n);u(n)}function l(){i(o,n);f.addBlock(n,e)}}function b(n,e,a,o){e.removeAttribute("each");o=o||[];var f=e.previousSibling,c=[],l;if(!f){f=r();e.parentNode.appendChild(f)}var s=i(f,r());u(e);this.update=function(){var e=n.apply(a,o);if(l==e)return;if(Array.isArray(e)){if(l)l.splice(0,l.length);t(e,v);l=m(e)}else if(e&&!l){y(e);l=e}};function p(n,t,e){a.__.addBlock(n,o.concat([t,e]))}function d(n,t){var r=e.cloneNode(true);i(t,r);return r}function v(n,t){var e=d(n,f);c.push(e);p(e,n,t)}function h(n,t){var e=d(n,s.nextSibling);c.unshift(e);p(e,n,t)}function m(n){var e=n.push;n.push=function(t){e.call(n,t);v(t);a.update()};var r=n.unshift;n.unshift=function(t){r.call(n,t);h(t);a.update()};var i=n.splice;n.splice=function(e,r){t(c.slice(e,e+r),function(n){a.__.removeBlock(n);u(n)});c.splice(e,r);i.call(n,e,r)};n.remove=function(t){var e=n.indexOf(t);if(e>=0)return n.splice(e,1)};var o=n.sort;n.sort=function(e){t(c,u);c=[];o.call(n,e);t(n,v);a.update()};return n}function y(n){Object.keys(n).forEach(function(t){var e=n[t];v(t,e)})}this.update()}var C=window.riot={},g=[],A={};C.tag=function(n,t,e,r){A[n]=[t,e,r]};C.mount=function(n,t,e){var r=new w(n,t,e);g.push(r);return r.update()};C.update=function(){t(g,function(n){n.update()})};function w(e,r,i,u){var a=A[e];if(!a)throw"No such tag "+e;var f=this.root=p(a[0]),l=this.tags={},d=this.refs={},v=this,h=[];function m(n,t){Object.defineProperty(v,n,{get:function(){return t},set:function(t){throw"Cannot set "+n}});return t}m("opts",i);m("parent",u);m("update",function(n){if(n)s(v,n);t(h,function(n){n.update()});return v});var y=m("__",{fns:a[1],addBlock:function(t,e){var r=new n(t,v,e);h.push(r);return r},removeBlock:function(n){t(h,function(t,e){if(t.root==n)h.splice(e,1)})},addChild:function(n,t,e){e=e||l;var r=e[n];if(Array.isArray(r))r.push(t);else e[n]=r?[r,t]:t},addRef:function(n,t){y.addChild(n,t,d)}});y.addBlock(f,[]);var b=a[2];b&&b.call(v,v,i);if(r){if(c(r)==e){o(f,r);f.changed=r;f=r}else{r.parentNode.replaceChild(f,r)}}}}();