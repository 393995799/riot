!function(){function n(n,r,o){var s=r.__,d=[],v=[],C=[],_=[],g=[];this.root=n;p(n,function(n){var t=c(n),i=e(n);var u=k(i.if);if(u){g.push(new y(n,r,o,function(){return u.apply(r,o)}));return false}if(t=="yield"){d.push(n);return false}var a=k(i.each);if(a){v.push([a,n]);return false}var f=i.name||i.id;if(f&&f[0]!="$")s.addRef(f,n);if(n!=r.root&&l(n)){var p=new w(t,n,j(n,i),r);s.addChild(t,p);C.push(p);return false}var h=k(n.nodeValue);if(h){N(n,h)}E(n,i)});v=v.map(function(n){return new b(n[0],n[1],r,o)});function A(n){r.parent.__.addBlock(n)}t(d,function(n){var t=e(n).name,o=r.parent.__.tmpl,c=o?o.cloneNode(true):r.parent.root;if(t){var l=a(c,t);l.removeAttribute("name");i(n,l);A(l)}else{f(o?c:c.firstChild.nextSibling,n,A)}u(n)});this.update=function(){t(g.concat(C).concat(v),function(n){n.update()});t(_,function(n){n.apply(r,o)})};function k(n){if(n){n=n.trim();var t=1*n.slice(1);if(n[0]=="$"&&t>=0)return s.fns[t]}}function N(n,t){_.push(function(){var e=t.apply(r,o),i=m(e);if(h(e)){var u=n.parent||n.parentNode;u.innerHTML=i;n.parent=u}else n.nodeValue=i})}function B(n,t,e){n.removeAttribute(t);n.addEventListener(t.slice(2),function(n){var t=o?o.concat([n]):[n],i=e.apply(r,t);if(i){var u=i.apply(r,t);r.update();return u}})}function j(n,t){var e={},i=[];for(var u in t){var a=t[u];var f=k(a);e[u]=f?f.apply(r,o):a;f&&n.removeAttribute(u)}return e}function E(n,t){Object.keys(t).forEach(function(e){var i=k(t[e]);if(!i)return;n.setAttribute(e,"");if(e.slice(0,2)=="on"){B(n,e,i)}else{_.push(function(){var t=i.apply(r,o),u=n.changed||n;t===false?u.removeAttribute(e):u.setAttribute(e,m(t))})}})}}function t(n,t){if(n){for(var e=0;e<n.length;e++){if(t(n[e],e)===false)e--}}}function e(n){var e={};t(n.attributes,function(n){e[n.name]=n.value});return e}function r(){return document.createTextNode("")}function i(n,t){n.parentNode.insertBefore(t,n);return t}function u(n){var t=n.parentNode;t&&t.removeChild(n)}function a(n,t){var e;p(n,function(n){if(n.tagName&&n.getAttribute("name")==t)e=n;if(e)return false});return e}function o(n,t){while(n.firstChild)t.appendChild(n.firstChild);return t}function f(n,t,e){while(n.firstChild){var r=n.firstChild;i(t,r);e(r)}}function c(n){var t=n.tagName;return t&&t.toLowerCase()}function l(n){var t=c(n);return t&&!!g[t.toLowerCase()]}function s(n,e){t(Object.keys(e),function(t){n[t]=e[t]});return n}function d(n){var t=document.createElement("template");t.innerHTML=n.trim();return(t.content||t).firstChild}function p(n,t){if(t(n)===false)return;n=n.firstChild;while(n){if(p(n,t)===false)return;n=n.nextSibling}}function v(n){var t=[];for(var e in n){var r=n[e];if(r)t.push(e=="_html"?r:e)}return t.join(" ")}function h(n){for(var t=0,e;e=(n||[])[t];t++){if(e._html)return true}}function m(n){return Array.isArray(n)?n.map(m).join(""):n==null?"":typeof n=="object"?v(n):n}function y(n,t,e,a){n.removeAttribute("if");var o;var f=i(n,r()),c=t.__;this.update=function(){var n=!!a();if(n!==o)n?s():l();o=n};function l(){c.removeBlock(n);u(n)}function s(){i(f,n);c.addBlock(n,e)}}function b(n,e,a,f){e.removeAttribute("each");f=f||[];var c=e.previousSibling,s=[],d;if(!c){c=r();e.parentNode.appendChild(c)}var p=i(c,r());u(e);this.update=function(){var e=n.apply(a,f);if(d==e)return;if(Array.isArray(e)){if(d)d.splice(0,d.length);t(e,m);d=b(e)}else if(e&&!d){C(e);d=e}};if(e.innerHTML&&l(e)){a.__.tmpl=o(e,document.createElement("div"))}function v(n,t,e){a.__.addBlock(n,f.concat([t,e]))}function h(n,t){var r=e.cloneNode(true);i(t,r);return r}function m(n,t){var e=h(n,c);s.push(e);v(e,n,t)}function y(n,t){var e=h(n,p.nextSibling);s.unshift(e);v(e,n,t)}function b(n){var e=n.push;n.push=function(t){e.call(n,t);m(t);a.update()};var r=n.unshift;n.unshift=function(t){r.call(n,t);y(t);a.update()};var i=n.splice;n.splice=function(e,r){t(s.slice(e,e+r),function(n){a.__.removeBlock(n);u(n)});s.splice(e,r);i.call(n,e,r)};n.remove=function(t){var e=n.indexOf(t);if(e>=0)return n.splice(e,1);return t};n.pop=function(){var t=n.slice(-1)[0];return n.remove(t)};var o=n.sort;n.sort=function(e){t(s,u);s=[];o.call(n,e);t(n,m);a.update()};return n}function C(n){Object.keys(n).forEach(function(t){var e=n[t];m(t,e)})}this.update()}var C=window.riot={},_=[],g={};function A(n){var t=document.createElement("style");t.innerText=n;document.documentElement.appendChild(t)}C.tag=function(n,t,e,r,i){g[n]=[t,e,r];if(i)A(i)};C.mount=function(n,t,e){var r=new w(n,t,e);_.push(r);return r.update()};C.update=function(){t(_,function(n){n.update()})};function w(e,r,i,u){var a=g[e];if(!a)throw"No such tag "+e;var f=this.root=d(a[0]),l=this.tags={},v=this.refs={},h=this,m=[];function y(n,t){Object.defineProperty(h,n,{get:function(){return t},set:function(t){throw"Cannot set "+n}});return t}y("opts",i);y("parent",u);y("update",function(n){if(n)s(h,n);t(m,function(n){n.update()});return h});this.blocks=m;var b=y("__",{fns:a[1],addBlock:function(t,e){var r=new n(t,h,e);m.push(r);return r},removeBlock:function(n){p(n,function(n){t(m,function(t,e){if(t.root==n)m.splice(e,1)})})},addChild:function(n,t,e){e=e||l;var r=e[n];if(Array.isArray(r))r.push(t);else e[n]=r?[r,t]:t},addRef:function(n,t){b.addChild(n,t,v)}});b.addBlock(f,[]);var C=a[2];C&&C.call(h,h,i);if(r){if(c(r)==e){o(f,r);f.changed=r;f=r}else{r.parentNode.replaceChild(f,r)}}}}();