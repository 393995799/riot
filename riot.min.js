!function(){function n(n,e,r,o){var c=[],f=[],s=[],m=[];this.update=function(){t(c.concat(s).concat(f),function(n){n.update()});t(m,function(t){t.call(n,o)})};l(r,function(t){r=i(t,"if");var e=b(r);if(e){c.push(new d(t,n,e,o));return false}var r=i(t,"each"),l=b(r);if(l){f.push([l,t]);return false}var h=u(t);if(t!=n.root&&a(h)){s.push(p.mount(h,t,o));return false}var w=b(t.nodeValue);w&&m.push(function(){var e=w.call(n,o);if(e&&e._html)t.parentNode.innerHTML=e._html;else t.nodeValue=v(e)});N(t)});f=f.map(function(t){return new h(t[0],t[1],n,e,o)});function b(n){if(n){n=n.trim();var t=1*n.slice(1);if(n[0]=="$"&&t>=0)return e[t]}}function w(t,e,r){t.removeAttribute(e);t.addEventListener(e.slice(2),function(t){var e=r.call(n,t,o);if(e){var i=e.call(n,t,o);n.update();return i}})}function N(e){t(e.attributes,function(t){var r=b(t.value);if(!r)return;var i=t.name;if(i.slice(0,2)=="on"){w(e,i,r)}else{m.push(function(){var e=r.call(n,o);t.value=v(e)})}})}}function t(n,t){if(n){for(var e=0;e<n.length;e++){t(n[e],e)}}}function e(n,t){n.parentNode.insertBefore(t,n);return t}function r(n){var t=n.parentNode;t&&t.removeChild(n)}function i(n,t){var e=n.tagName&&n.getAttribute(t);if(e){n.removeAttribute(t);return e}}function u(n){var t=n.tagName;return t&&t.toLowerCase()}function a(n){return n&&!!m[n.toLowerCase()]}function o(n,e){t(Object.keys(e),function(t){n[t]=e[t]});return n}function c(n){var t=document.createElement("div");t.innerHTML=n.trim();return t.firstChild}function f(n){var e={};t(n.attributes,function(n){e[n.name]=n.value});return e}function l(n,t){if(t(n)===false)return;n=n.firstChild;while(n){if(l(n,t)===false)return;n=n.nextSibling}}function s(n){var t=[];for(var e in n){if(n[e])t.push(e)}return t.join(" ")}function v(n){return Array.isArray(n)?n.map(v).join(""):n==null?"":typeof n=="object"?s(n):n}function d(n,t,i,u){var a=e(n,document.createTextNode("")),o;this.update=function(){return i.call(t,u)?c():r(n)};function c(){!o&&t.addBlock(n,u);o=e(a,n)}}function h(n,i,u,a,o){var c=n.call(u,o);if(!c)return;var f=i.previousSibling,l=e(f,document.createTextNode("")),s=[];function v(n){c.splice(0,c.length);t(n,h);c=m(n)}this.update=function(){var t=n.call(u,o);if(t!=c)v(t)};function d(n,t){var r=i.cloneNode(true);e(t,r);return r}function h(n,t){var e=d(n,f);s.push(e);u.addBlock(e,n)}function p(n){var t=d(n,l.nextSibling);s.unshift(t);u.addBlock(t,n)}function m(n){var e=n.push;n.push=function(t){e.call(n,t);h(t)};var i=n.unshift;n.unshift=function(t){i.call(n,t);p(t)};var u=n.splice;n.splice=function(e,i){t(s.slice(e,e+i),r);s.splice(e,i);u.call(n,e,i)};n.remove=function(t){var e=n.indexOf(t);if(e>=0)return n.splice(e,1)};return n}r(i);m(c);t(c,h)}var p=window.riot={};var m={};p.tag=function(n,t,e,r){m[n]=[t,e,r]};p.mount=function(n,t,e){var r=m[n];if(r){var i=new b(n,r[0],r[1],r[2],e);return i.mount(t)}};function b(e,r,i,a,l){this.opts=l=l||{};var s=this,v=[],d;this.addBlock=function(t,e){var r=new n(s,i,t,e);v.push(r)};this.mount=function(n){if(d)return;d=s.root=c(r);a&&a.call(s,s,l);s.addBlock(d,l);o(l,f(n));if(u(n)==e){while(d.childNodes[0])n.appendChild(d.firstChild);d=n}else{n.parentNode.replaceChild(d,n)}return s.update()};this.update=function(n){if(n)o(s,n);t(v,function(n){n.update()});return s}}}();